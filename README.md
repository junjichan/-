# 中文地址文本相关性分析：基于类别不平衡的BERT建模与应用


## 项目背景
地址文本相关性任务在现实世界中具有广泛的应用场景：
- 基于地理信息搜索的地理位置服务
- 突发事件位置信息的快速搜索定位
- 不同地址信息系统的对齐

### 地址文本形式
- **规范地址文本**：包含四级行政区划及路名路号POI
- **要素缺省文本**：只有路名+路号或只有POI
- **非规范文本**：口语化描述（如"阿里西溪园区东门旁亲橙里"）

地址要素解析与地址相关性共同构成中文地址处理两大核心任务，具有重要商业价值。

## 赛题描述
对给定的地址query及候选地址文本，系统需对匹配程度进行打分：

### 挑战
1. 同一地址存在多种写法，无给定改写词表
2. 需结合省市区等限制条件分析相关性
3. 不同地市地址规范不一，要求高泛化性

## 数据说明
### 输入输出格式
**输入**：query-地址文本对  
**输出**：完全匹配/部分匹配/不匹配  

**示例**：

json

{

"text_id": "1",

"query": "华侨村西堤1巷12栋",

"candidate": [

{"text": "华侨新村西堤一巷12号", "label": "部分匹配"},

{"text": "宝安区华侨新村西堤一巷", "label": "部分匹配"},

{"text": "海丰县米巷西12幢", "label": "不匹配"}

]

}

### 匹配标准
| 匹配类型 | 标准说明 |
|---------|---------|
| **完全匹配** | 匹配到楼栋号或POI（若原始数据只到POI） |
| **部分匹配** | 原始地址给到楼栋号，备选只匹配到POI |
| **不匹配** | 完全不匹配原文地址 |

## 数据探索性分析
原始数据集：119,397样本（删除10个缺失值后）
- 平均长度：35字符（范围6-126字符）
- 主要分布：20-40字符（长尾分布）


- **类别不平衡问题**：
  - not_match：58.7%（70,000+样本）
  - exact_match：6.9%（8,000+样本）
  - partial_match：34.3%（40,000+样本）


### 方法流程

- **核心模型**：huggingface中文BERT
- **输入结构**：`[CLS] + 地址1 + [SEP] + 地址2 + [SEP]`
- **处理流程**：
  1. 地址语义编码
  2. 特征融合
  3. 相似度决策

### 超参数设置
| 参数 | 值 |
|------|----|
| 预训练模型 | bert-base-chinese |
| batch_size | 192 |
| learning_rate | 2e-5 |
| epochs | 10 |
| 优化器 | AdamW |
| 硬件 | RTX 3090 24GB |

## 损失函数设计
1. **CEFL损失函数**
2. **CEFL2损失函数**
3. **NCE损失函数**



## 数据增强
### 增强策略
1. **句子交换**：50%概率交换输入顺序
2. **括号删除**：移除补充说明性括号内容
3. **同义词替换**：基于LLM生成同义词表


## 项目总结
### 核心发现
1. **类别不平衡影响有限**：专用损失函数未显著提升性能
2. **数据增强需谨慎**：增强方案导致性能下降（↓1.09% F1）
3. **过拟合是主要挑战**：所有方案呈现"先升后降"验证曲线


### 未来方向
1. 开发地址域特定增强方法
2. 探索token级对比损失
3. 增加exact_match样本收集
